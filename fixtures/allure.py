"""
–§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Allure –æ—Ç—á–µ—Ç–∞–º–∏.
"""

import pytest

from tools.allure.environment import create_allure_environment_file


@pytest.fixture(scope='session', autouse=True)
def save_allure_environment_file():
    """
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª environment.properties –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤.
    
    –≠—Ç–∞ —Ñ–∏–∫—Å—Ç—É—Ä–∞:
    - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Å—Å–∏–∏ (autouse=True)
    - –ò–º–µ–µ—Ç –æ–±–ª–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è session (scope='session')
    - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ (yield)
    - –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª environment.properties —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ–∫—Ä—É–∂–µ–Ω–∏–∏
    """
    # –î–æ –Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
    yield  # –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã...
    
    # –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª environment.properties
    print("\nüîß –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ environment.properties –¥–ª—è Allure –æ—Ç—á–µ—Ç–∞...")
    create_allure_environment_file()